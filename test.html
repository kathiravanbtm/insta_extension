<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instagram Video Enhancer Pro - Test Page</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }

        .test-section {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .test-video {
            width: 100%;
            max-width: 400px;
            border-radius: 8px;
            margin: 10px 0;
        }

        .test-controls {
            margin-top: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #e9ecef;
        }

        .test-controls h3 {
            margin: 0 0 10px 0;
            color: #495057;
        }

        .control-row {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
            align-items: center;
        }

        .control-row label {
            min-width: 100px;
            font-weight: 500;
        }

        .control-row input[type="range"] {
            flex: 1;
        }

        .control-row span {
            min-width: 40px;
            text-align: center;
            font-weight: 500;
        }

        button {
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: background 0.2s;
        }

        button:hover {
            background: #5a67d8;
        }

        .status {
            margin-top: 15px;
            padding: 10px;
            border-radius: 6px;
            font-weight: 500;
        }

        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .status.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        .feature-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .feature-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .feature-item h4 {
            margin: 0 0 5px 0;
            color: #495057;
        }

        .feature-item p {
            margin: 0;
            color: #6c757d;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <h1>üé¨ Instagram Video Enhancer Pro - Test Page</h1>

    <div class="feature-list">
        <div class="feature-item">
            <h4>üé≠ Rotation</h4>
            <p>Rotate videos in 90¬∞ increments with visual controls</p>
        </div>
        <div class="feature-item">
            <h4>üîç Zoom & Scale</h4>
            <p>Scale videos from 25% to 400% smoothly</p>
        </div>
        <div class="feature-item">
            <h4>‚úÇÔ∏è Interactive Crop</h4>
            <p>Click and drag to crop videos with live preview</p>
        </div>
        <div class="feature-item">
            <h4>üé® Filters</h4>
            <p>Adjust brightness, contrast, and saturation</p>
        </div>
        <div class="feature-item">
            <h4>‚õ∂ Fullscreen</h4>
            <p>Enhanced fullscreen with overlay controls</p>
        </div>
        <div class="feature-item">
            <h4>‚¨áÔ∏è Download</h4>
            <p>Save Instagram videos to your device</p>
        </div>
    </div>

    <div class="test-section">
        <h2>Test Video 1 - Basic Enhancement</h2>
        <video class="test-video" controls>
            <source src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>

        <div class="test-controls">
            <h3>Manual Controls (for testing)</h3>
            <div class="control-row">
                <label>Rotation:</label>
                <input type="range" id="testRotation" min="0" max="270" step="90" value="0">
                <span id="rotationValue">0¬∞</span>
                <button onclick="rotateVideo()">Apply</button>
            </div>
            <div class="control-row">
                <label>Zoom:</label>
                <input type="range" id="testZoom" min="25" max="400" value="100">
                <span id="zoomValue">100%</span>
                <button onclick="zoomVideo()">Apply</button>
            </div>
            <div class="control-row">
                <button onclick="resetVideo()">Reset Video</button>
                <button onclick="toggleFullscreen()">Fullscreen</button>
                <button onclick="simulateEnhance()">Simulate Enhance</button>
            </div>
        </div>

        <div id="testStatus" class="status info">
            Load this page in a browser with the extension installed to test functionality.
        </div>
    </div>

    <div class="test-section">
        <h2>Test Video 2 - Advanced Features</h2>
        <video class="test-video" controls>
            <source src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>

        <div class="test-controls">
            <h3>Filter Controls</h3>
            <div class="control-row">
                <label>Brightness:</label>
                <input type="range" id="testBrightness" min="0" max="200" value="100">
                <span id="brightnessValue">100%</span>
            </div>
            <div class="control-row">
                <label>Contrast:</label>
                <input type="range" id="testContrast" min="0" max="200" value="100">
                <span id="contrastValue">100%</span>
            </div>
            <div class="control-row">
                <label>Saturation:</label>
                <input type="range" id="testSaturation" min="0" max="200" value="100">
                <span id="saturationValue">100%</span>
            </div>
            <div class="control-row">
                <button onclick="applyFilters()">Apply Filters</button>
                <button onclick="resetFilters()">Reset Filters</button>
            </div>
        </div>
    </div>

    <div class="test-section">
        <h2>Keyboard Shortcuts Test</h2>
        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
            <p><strong>Test these shortcuts when a video has focus:</strong></p>
            <ul style="margin: 10px 0; padding-left: 20px;">
                <li><kbd>Space</kbd> - Play/Pause</li>
                <li><kbd>R</kbd> - Rotate right</li>
                <li><kbd>Shift + R</kbd> - Rotate left</li>
                <li><kbd>F</kbd> - Toggle fullscreen</li>
                <li><kbd>C</kbd> - Toggle crop mode</li>
                <li><kbd>0</kbd> - Reset transformations</li>
                <li><kbd>Esc</kbd> - Exit fullscreen</li>
            </ul>
            <p><em>Note: Extension must be active for shortcuts to work.</em></p>
        </div>
    </div>

    <script>
        // Test page JavaScript for manual testing
        let currentVideo = null;

        document.addEventListener('DOMContentLoaded', function() {
            // Update value displays
            document.getElementById('testRotation').addEventListener('input', function() {
                document.getElementById('rotationValue').textContent = this.value + '¬∞';
            });

            document.getElementById('testZoom').addEventListener('input', function() {
                document.getElementById('zoomValue').textContent = this.value + '%';
            });

            document.getElementById('testBrightness').addEventListener('input', function() {
                document.getElementById('brightnessValue').textContent = this.value + '%';
            });

            document.getElementById('testContrast').addEventListener('input', function() {
                document.getElementById('contrastValue').textContent = this.value + '%';
            });

            document.getElementById('testSaturation').addEventListener('input', function() {
                document.getElementById('saturationValue').textContent = this.value + '%';
            });

            // Set initial video reference
            currentVideo = document.querySelector('.test-video');
        });

        function rotateVideo() {
            if (!currentVideo) return;
            const rotation = document.getElementById('testRotation').value;
            currentVideo.style.transform = `rotate(${rotation}deg)`;
            updateStatus(`Rotated video to ${rotation}¬∞`);
        }

        function zoomVideo() {
            if (!currentVideo) return;
            const zoom = document.getElementById('testZoom').value;
            currentVideo.style.transform = `scale(${zoom/100})`;
            updateStatus(`Zoomed video to ${zoom}%`);
        }

        function resetVideo() {
            if (!currentVideo) return;
            currentVideo.style.transform = 'none';
            currentVideo.style.filter = 'none';
            document.getElementById('testRotation').value = 0;
            document.getElementById('rotationValue').textContent = '0¬∞';
            document.getElementById('testZoom').value = 100;
            document.getElementById('zoomValue').textContent = '100%';
            updateStatus('Video reset to original state');
        }

        function toggleFullscreen() {
            if (!currentVideo) return;
            if (document.fullscreenElement) {
                document.exitFullscreen();
                updateStatus('Exited fullscreen');
            } else {
                currentVideo.requestFullscreen();
                updateStatus('Entered fullscreen');
            }
        }

        function applyFilters() {
            if (!currentVideo) return;
            const brightness = document.getElementById('testBrightness').value;
            const contrast = document.getElementById('testContrast').value;
            const saturation = document.getElementById('testSaturation').value;
            currentVideo.style.filter = `brightness(${brightness}%) contrast(${contrast}%) saturate(${saturation}%)`;
            updateStatus('Applied video filters');
        }

        function resetFilters() {
            if (!currentVideo) return;
            currentVideo.style.filter = 'none';
            document.getElementById('testBrightness').value = 100;
            document.getElementById('brightnessValue').textContent = '100%';
            document.getElementById('testContrast').value = 100;
            document.getElementById('contrastValue').textContent = '100%';
            document.getElementById('testSaturation').value = 100;
            document.getElementById('saturationValue').textContent = '100%';
            updateStatus('Reset video filters');
        }

        function simulateEnhance() {
            updateStatus('Simulating enhancement... (Check if extension controls appear)');
            // This would normally trigger the extension's enhancement
            if (typeof chrome !== 'undefined' && chrome.runtime) {
                chrome.runtime.sendMessage({ action: 'enhanceCurrentVideo' }, function(response) {
                    if (chrome.runtime.lastError) {
                        updateStatus('Extension not active or not responding', 'error');
                    } else {
                        updateStatus('Enhancement request sent to extension', 'success');
                    }
                });
            } else {
                updateStatus('Extension API not available - load as unpacked extension', 'error');
            }
        }

        function updateStatus(message, type = 'info') {
            const statusEl = document.getElementById('testStatus');
            statusEl.textContent = message;
            statusEl.className = `status ${type}`;
        }

        // Listen for messages from extension
        if (typeof chrome !== 'undefined' && chrome.runtime) {
            chrome.runtime.onMessage.addListener(function(request, sender, sendResponse) {
                if (request.action === 'enhancementComplete') {
                    updateStatus('Video enhancement applied!', 'success');
                }
            });
        }
    </script>
</body>
</html>
